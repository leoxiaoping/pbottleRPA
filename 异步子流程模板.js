/**
 * å°ç“¶RPAå¼‚æ­¥å­æµç¨‹æ¨¡æ¿
 * 
 * åŠŸèƒ½è¯´æ˜ï¼šæ­¤è„šæœ¬æ¼”ç¤ºäº†RPAä¸­å¦‚ä½•ä½¿ç”¨å¼‚æ­¥å­æµç¨‹
 * é€šè¿‡è¿™ä¸ªç¤ºä¾‹ï¼Œæ‚¨å¯ä»¥å­¦ä¹ å¦‚ä½•åœ¨ä¸»æµç¨‹ä¸­è°ƒç”¨åŒæ­¥å’Œå¼‚æ­¥å­æµç¨‹ï¼Œå¹¶å¤„ç†å­æµç¨‹çš„è¿”å›ç»“æœ
 */

// å¼•å…¥å°ç“¶RPAçš„æ ¸å¿ƒåº“ï¼Œè·å¾—å¯¹RPAåŠŸèƒ½çš„è®¿é—®æƒé™
const pbottleRPA = require('./pbottleRPA.js')

// é›†ä¸­æ³¨å†Œå…¨å±€å˜é‡ï¼Œå…¶ä»–åœ°æ–¹ä½¿ç”¨ä¸ç”¨åŠ  global å‰ç¼€
global.global_processName = 'å°ç“¶RPAâ€”â€”XXXXæµç¨‹æ¨¡æ¿'   // å®šä¹‰å…¨å±€æµç¨‹åç§°å˜é‡
global.global_startTime = pbottleRPA.utils.getTime()   // è·å–å¹¶å®šä¹‰å…¨å±€å¼€å§‹æ—¶é—´å˜é‡

// ä¸»æµç¨‹å‡½æ•°ï¼Œä½¿ç”¨asyncå…³é”®å­—æ”¯æŒå¼‚æ­¥æ“ä½œï¼Œä½¿æ‰€æœ‰å­æµç¨‹åºåˆ—åŒ–
async function main() {

    // åœ¨æ—¥å¿—ä¸­è®°å½•ä¸»æµç¨‹å¼€å§‹ä¿¡æ¯ï¼ŒåŒ…æ‹¬å¼€å§‹æ—¶é—´å’Œæµç¨‹åç§°
    pbottleRPA.log("ä¸»æµç¨‹å¼€å§‹ ğŸ“",global_startTime,global_processName)

    await å­æµç¨‹2('è¾“å…¥å‚æ•°2');

    console.log('å¯åŠ¨å­æµç¨‹  åŒæ­¥å­æµç¨‹'); 
    // é€šè¿‡requireç›´æ¥æ‰§è¡ŒåŒæ­¥å­æµç¨‹ï¼ˆåªåŒ…å«é¡¶å±‚ä»£ç çš„è„šæœ¬ï¼‰
    require('./å¿«é€Ÿå¼€å§‹æ¼”ç¤ºï¼ˆ3è¡Œä»£ç ï¼‰.js')

    console.log('å¯åŠ¨å¼‚æ­¥å­æµç¨‹ test.js');
    // è°ƒç”¨å¼‚æ­¥å­æµç¨‹ï¼Œç­‰å¾…å…¶æ‰§è¡Œå®Œæˆå¹¶è·å–è¿”å›ç»“æœ
    // ä½¿ç”¨awaitå…³é”®å­—ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ
    let rs = await require('./test.js')('https://rpa.pbottle.com')  // ä¼ é€’å‚æ•°ç»™å­æµç¨‹
    console.log('å­æµç¨‹è¿”å›ç»“æœï¼š',rs);  // è¾“å‡ºå­æµç¨‹è¿”å›çš„ç»“æœ

    // await process1() //æœ‰é”™è¯¯ï¼ˆè¢«æ³¨é‡Šæ‰çš„é”™è¯¯ç¤ºä¾‹ï¼‰
    pbottleRPA.log("ä¸»æµç¨‹å®Œæˆ âœ…ï¸")  // åœ¨æ—¥å¿—ä¸­è®°å½•ä¸»æµç¨‹å®Œæˆä¿¡æ¯
}

// æ‰§è¡Œä¸»æµç¨‹å‡½æ•°ï¼Œå¹¶æ•è·å¯èƒ½å‘ç”Ÿçš„é”™è¯¯
main().catch((e)=>{  // ä¸»æµç¨‹é”™è¯¯æ•è·
    console.log('âŒ æœªå®Œæˆï¼Œé”™è¯¯',e);  // è¾“å‡ºé”™è¯¯ä¿¡æ¯
    console.log('å‡†å¤‡å‘é€æ¶ˆæ¯ç»™ç®¡ç†å‘˜ ğŸ‘‰');  // è¾“å‡ºåç»­å¤„ç†ä¿¡æ¯
})

// test.js æ–‡ä»¶å†…å®¹è¯´æ˜ï¼ˆå­æµç¨‹ï¼‰:
// module.exports = async (url) => {  
//     console.log('å­æµç¨‹å¼€å§‹')  
//     const res = await fetch(url) 
//     pbottleRPA.log('ç½‘ç»œè¯·æ±‚å®Œæˆï¼~',res.ok,res.url)
//     console.log('å­æµç¨‹ç»“æŸ')  
//     return true 
// }


async function å­æµç¨‹2(params) {  // å®šä¹‰ä¸€ä¸ªå†…è”çš„å¼‚æ­¥å‡½æ•°ä½œä¸ºå­æµç¨‹ï¼Œæ¥æ”¶å‚æ•°ï¼Œå­æµç¨‹æ¨èä½¿ç”¨ä¸­æ–‡å‘½å
    console.log('å­æµç¨‹2å¼€å§‹',params);
}